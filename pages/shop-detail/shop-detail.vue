<template>
    <view class="store-detail-page">
        
        <!-- å†…å®¹åŒºåŸŸ -->
        <view class="content-scroll">
            <!-- å•†åº—å°é¢å›¾ -->
            <view class="store-cover">
                <!-- å®é™…é¡¹ç›®ä¸­å¯åœ¨æ­¤å¤„æ”¾ç½®å›¾ç‰‡ï¼Œä¾‹å¦‚ <img src="/static/store-cover.jpg" alt="é—¨åº—å°é¢"> -->
                <view class="cover-overlay">
                    <view class="store-name">è“è°ƒé…’å§</view>
                    <view class="distance"><i class="fas fa-location-arrow"></i> 0.8km</view>
                </view>
            </view>
            
            <!-- å•†åº—åŸºæœ¬ä¿¡æ¯ -->
            <view class="store-info">
                <view class="store-tags">
                    <view class="store-tag">é¸¡å°¾é…’</view>
                    <view class="store-tag">çˆµå£«ä¹</view>
                    <view class="store-tag">èšä¼š</view>
                    <view class="store-tag">å¨å£«å¿Œ</view>
                    <view class="store-tag">ç²¾é…¿å•¤é…’</view>
                </view>
                
                <view class="store-desc">
                    çˆµå£«ä¹ä¸»é¢˜é…’å§ï¼Œæä¾›å„ç±»ç‰¹è‰²é¸¡å°¾é…’å’Œç²¾é…¿å•¤é…’ï¼Œç¯å¢ƒä¼˜é›…èˆ’é€‚ï¼Œæ¯æ™šæœ‰ç°åœºçˆµå£«ä¹é˜Ÿè¡¨æ¼”ã€‚é€‚åˆæœ‹å‹èšä¼šã€æƒ…ä¾£çº¦ä¼šå’Œå°å‹æ´¾å¯¹ã€‚æˆ‘ä»¬ç²¾é€‰ä¸–ç•Œå„åœ°ä¼˜è´¨é…’å“ï¼Œæ­é…ç²¾è‡´å°é£Ÿï¼Œä¸ºæ‚¨æ‰“é€ å®Œç¾çš„å¤œæ™šä½“éªŒã€‚
                </view>
            </view>
            
            <!-- è¯¦æƒ…å¡ç‰‡ - åŸºæœ¬ä¿¡æ¯ -->
            <view class="detail-card">
                <view class="card-title">åŸºæœ¬ä¿¡æ¯</view>
                
                <view class="info-item">
                    <view class="info-content">
                        <view class="info-title">ğŸ“åœ°å€</view>
                        <view class="info-text">æœé˜³åŒºä¸‰é‡Œå±¯è·¯18å·é™¢2å·æ¥¼1å±‚101</view>
                    </view>
                </view>
                
                <view class="info-item">
                    <view class="info-content">
                        <view class="info-title">ğŸ•’è¥ä¸šæ—¶é—´</view>
                        <view class="hours-item">
                            <view class="hours-day">å‘¨ä¸€è‡³å‘¨å››</view>
                            <view class="hours-time">18:00 - 02:00</view>
                        </view>
                        <view class="hours-item">
                            <view class="hours-day">å‘¨äº”è‡³å‘¨å…­</view>
                            <view class="hours-time">18:00 - 04:00</view>
                        </view>
                        <view class="hours-item">
                            <view class="hours-day">å‘¨æ—¥</view>
                            <view class="hours-time">18:00 - 01:00</view>
                        </view>
                    </view>
                </view>
                
                <view class="info-item">
                    <view class="info-content">
                        <view class="info-title">ğŸ“±ç”µè¯</view>
                        <view class="info-text">010-8765-4321</view>
                    </view>
                </view>

                <view class="info-item">
                    <view class="info-content">
                        <view class="info-title">ğŸ’¬å¾®ä¿¡</view>
                        <img class="wechat-qr" src="https://cdn.jsdelivr.net/gh/zjcqoo/weui-app@master/static/images/wechat.png" alt="å¾®ä¿¡äºŒç»´ç " />
                    </view>
                </view>
                
                <view class="info-item">
                    <view class="info-content">
                        <view class="info-title">ğŸ’°äººå‡æ¶ˆè´¹</view>
                        <view class="info-text">Â¥120 - Â¥200</view>
                    </view>
                </view>
                
                <view class="map-preview" @click="openMap">
                    <i class="fas fa-map-marked-alt" style="font-size: 80rpx; opacity: 0.3;"></i>
                    <view class="map-overlay">ç‚¹å‡»æŸ¥çœ‹åœ°å›¾ä½ç½®</view>
                </view>
            </view>
            
        </view>
        
        <!-- åº•éƒ¨æ“ä½œæ  -->
        <view class="action-bar">
            <button class="nav-btn" @click="openNavigation">
                <i class="fas fa-map-marker-alt"></i> å¯¼èˆª
            </button>
            <button class="primary-btn" @click="callPhone">
                <i class="fas fa-phone-alt"></i> ç”µè¯é¢„è®¢
            </button>
        </view>
    </view>
</template>

<script setup>
import { ref } from 'vue';
// Uni-appé¡¹ç›®é€šå¸¸å…¨å±€æ‹¥æœ‰uniå¯¹è±¡ï¼Œæ— éœ€é¢å¤–å¯¼å…¥

// ç‰¹è‰²æ¨èæ•°æ®
const featuredItems = ref([
    {
        id: 1,
        name: "è“è‰²å¤å¨å¤·",
        desc: "ç»å…¸çƒ­å¸¦é¸¡å°¾é…’ï¼Œæ··åˆæœ—å§†é…’å’Œè“æŸ‘æ©˜é…’",
        price: "68"
    },
    {
        id: 2,
        name: "å¨å£«å¿Œé…¸",
        desc: "æ³¢æœ¬å¨å£«å¿Œæ­é…æŸ æª¬æ±å’Œç³–æµ†",
        price: "78"
    },
    {
        id: 3,
        name: "ç²¾é…¿å•¤é…’å¥—é¤",
        desc: "ä¸‰æ¬¾ç‰¹è‰²ç²¾é…¿å•¤é…’ç»„åˆ",
        price: "128"
    },
    {
        id: 4,
        name: "çˆµå£«ä¹‹å¤œå¥—é¤",
        desc: "é¸¡å°¾é…’ä¸¤æ¯+å°é£Ÿæ‹¼ç›˜",
        price: "198"
    }
]);

// è¿”å›ä¸Šä¸€é¡µ
const handleBack = () => {
    // uni.navigateBack() ç”¨äºè¿”å›ä¸Šä¸€é¡µï¼Œé€šå¸¸åœ¨Uni-appä¸­ä½¿ç”¨
    uni.navigateBack();
};

// åˆ†äº«åŠŸèƒ½
const handleShare = () => {
    // uni.share() ç”¨äºåˆ†äº«ï¼Œæ ¹æ®å¹³å°é…ç½®
    uni.share({
        provider: 'weixin', // ç¤ºä¾‹ï¼šå¾®ä¿¡åˆ†äº«
        scene: 'WXSceneSession', // ç¤ºä¾‹ï¼šåˆ†äº«åˆ°ä¼šè¯
        type: 0, // æ–‡æœ¬ç±»å‹
        title: 'è“è°ƒé…’å§',
        href: 'https://example.com/shop/1', // åˆ†äº«çš„é“¾æ¥
        success: function (res) {
            console.log('åˆ†äº«æˆåŠŸ:', res);
            uni.showToast({ title: 'åˆ†äº«æˆåŠŸ', icon: 'success' });
        },
        fail: function (err) {
            console.log('åˆ†äº«å¤±è´¥:', err);
            uni.showToast({ title: 'åˆ†äº«å¤±è´¥', icon: 'none' });
        }
    });
};

// æ‰“å¼€åœ°å›¾
const openMap = () => {
    // uni.openLocation() ç”¨äºæ‰“å¼€åœ°å›¾åº”ç”¨å¹¶æ˜¾ç¤ºæŒ‡å®šä½ç½®
    uni.openLocation({
        latitude: 39.908823, // çº¬åº¦
        longitude: 116.397470, // ç»åº¦
        name: 'è“è°ƒé…’å§', // åœ°ç‚¹åç§°
        address: 'æœé˜³åŒºä¸‰é‡Œå±¯è·¯18å·é™¢2å·æ¥¼1å±‚101', // è¯¦ç»†åœ°å€
        success: function () {
            console.log('æ‰“å¼€åœ°å›¾æˆåŠŸ');
        },
        fail: function (err) {
            console.log('æ‰“å¼€åœ°å›¾å¤±è´¥:', err);
            uni.showToast({ title: 'æ— æ³•æ‰“å¼€åœ°å›¾', icon: 'none' });
        }
    });
};

// æ‰“å¼€å¯¼èˆª (åŠŸèƒ½ä¸ openMap ç±»ä¼¼ï¼Œuni.openLocation å®é™…ä¼šå¼•å¯¼è‡³åœ°å›¾åº”ç”¨è¿›è¡Œå¯¼èˆª)
const openNavigation = () => {
    uni.openLocation({
        latitude: 39.908823,
        longitude: 116.397470,
        name: 'è“è°ƒé…’å§',
        address: 'æœé˜³åŒºä¸‰é‡Œå±¯è·¯18å·é™¢2å·æ¥¼1å±‚101',
        success: function () {
            console.log('æ‰“å¼€å¯¼èˆªæˆåŠŸ');
        },
        fail: function (err) {
            console.log('æ‰“å¼€å¯¼èˆªå¤±è´¥:', err);
            uni.showToast({ title: 'æ— æ³•æ‰“å¼€å¯¼èˆª', icon: 'none' });
        }
    });
};

// æ‹¨æ‰“ç”µè¯
const callPhone = () => {
    // uni.makePhoneCall() ç”¨äºæ‹¨æ‰“ç”µè¯
    uni.makePhoneCall({
        phoneNumber: '01087654321', // ç”µè¯å·ç 
        success: function () {
            console.log('æ‹¨æ‰“ç”µè¯æˆåŠŸ');
        },
        fail: function (err) {
            console.log('æ‹¨æ‰“ç”µè¯å¤±è´¥:', err);
            uni.showToast({ title: 'æ‹¨æ‰“ç”µè¯å¤±è´¥', icon: 'none' });
        }
    });
};

// æŸ¥çœ‹å•†å“è¯¦æƒ…
const viewItemDetail = (item) => {
    // uni.navigateTo() ç”¨äºé¡µé¢è·³è½¬ï¼Œè¿™é‡Œè·³è½¬åˆ°å•†å“è¯¦æƒ…é¡µ
    uni.navigateTo({
        url: `/pages/product/detail?id=${item.id}`, // å‡è®¾å•†å“è¯¦æƒ…é¡µè·¯å¾„ä¸º /pages/product/detail
        success: function() {
            console.log(`æŸ¥çœ‹ ${item.name} è¯¦æƒ…`);
        }
    });
};
</script>

<style scoped>
/* å®šä¹‰ CSS å˜é‡ (åœ¨å®é™… Uni-app é¡¹ç›®ä¸­ï¼Œè¿™äº›å˜é‡é€šå¸¸å®šä¹‰åœ¨ App.vue æˆ–å…¨å±€ CSS æ–‡ä»¶ä¸­) */
:root {
    --primary: #FF6B00;
    --primary-light: #FF8A33;
    --primary-lightest: #fff5ec;
    --light-bg: #f8f8f8;
    --dark-text: #333;
    --gray-text: #666;
    --light-text: #999;
    --border: #eee;
    --weui-BG-0: #ededed;
    --weui-BG-1: #f7f7f7;
}


/* é¡µé¢æ ¹å®¹å™¨æ ·å¼ï¼Œæ¨¡æ‹Ÿ body/html çš„é«˜åº¦å’Œå¸ƒå±€ */
.store-detail-page {
    background-color: white;
    color: var(--dark-text);
    line-height: 1.6;
    font-size: 32rpx; /* Uni-app æ¨èä½¿ç”¨ rpx */
    height: 100vh; /* ç¡®ä¿é¡µé¢å æ»¡è§†å£é«˜åº¦ */
    display: flex;
    flex-direction: column;
    overflow: hidden; /* é˜²æ­¢é¡µé¢æ»šåŠ¨æ¡å‡ºç°ï¼Œç”± content-scroll æ§åˆ¶ */
}

/* é¡¶éƒ¨å¯¼èˆªæ  */
.navbar {
    background: white;
    padding: 0 30rpx;
    height: 100rpx;
    display: flex;
    align-items: center;
    border-bottom: 1px solid #e5e5e5;
    position: relative;
    z-index: 100;
    box-shadow: 0 1px 5px rgba(0,0,0,0.05);
}

.back-btn, .action-btn {
    font-size: 40rpx;
    color: var(--dark-text);
    width: 60rpx;
    height: 60rpx;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: all 0.3s;
    /* cursor: pointer; åœ¨H5æœ‰æ•ˆï¼Œå°ç¨‹åºæ— æ­¤æ¦‚å¿µ */
}
.back-btn { margin-right: 30rpx; }
.action-btn { margin-left: 30rpx; }

.back-btn:active, .action-btn:active {
    background-color: var(--weui-BG-0);
}

.navbar-title {
    font-size: 36rpx;
    font-weight: 600;
    color: var(--dark-text);
    flex: 1;
    text-align: center; /* å±…ä¸­æ ‡é¢˜ */
    position: absolute; /* ä½¿æ ‡é¢˜å±…ä¸­ä¸è¢«æŒ‰é’®å½±å“ */
    left: 50%;
    transform: translateX(-50%);
    width: 300rpx; /* é™åˆ¶å®½åº¦é˜²æ­¢è¿‡é•¿ */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* å•†åº—å°é¢å›¾ */
.store-cover {
    height: 480rpx;
    position: relative;
    overflow: hidden;
    background: linear-gradient(45deg, #2c3e50, #4a6491); /* ç¤ºä¾‹èƒŒæ™¯ï¼Œå¯æ›¿æ¢ä¸ºå›¾ç‰‡ */
}

.store-cover img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    opacity: 0.8;
}

.cover-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 40rpx 30rpx;
    background: linear-gradient(transparent, rgba(0,0,0,0.8));
    color: white;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.store-name {
    font-size: 48rpx;
    font-weight: 700;
    letter-spacing: 1rpx;
}

.distance {
    background: rgba(255,255,255,0.2);
    padding: 12rpx 24rpx;
    border-radius: 32rpx;
    font-size: 28rpx;
    display: flex;
    align-items: center;
    backdrop-filter: blur(4px); /* ç£¨ç ‚æ•ˆæœ */
}

.distance i {
    margin-right: 10rpx;
}

/* å•†åº—åŸºæœ¬ä¿¡æ¯ */
.store-info {
    padding: 40rpx 30rpx;
    border-bottom: 16rpx solid var(--weui-BG-0);
}

.store-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 16rpx;
    margin-bottom: 40rpx;
}

.store-tag {
    background: var(--primary-lightest);
    color: var(--primary);
    padding: 12rpx 28rpx;
    border-radius: 32rpx;
    font-size: 26rpx;
    font-weight: 500;
}

.store-desc {
    font-size: 30rpx;
    color: var(--gray-text);
    line-height: 1.7;
}

/* è¯¦æƒ…å¡ç‰‡ */
.detail-card {
    background: white;
    border-bottom: 16rpx solid var(--weui-BG-0);
    padding: 40rpx 30rpx;
}

.detail-card:last-of-type {
    border-bottom: none; /* æœ€åä¸€ä¸ªå¡ç‰‡ä¸‹æ–¹æ— éœ€åˆ†å‰²çº¿ */
    padding-bottom: calc(40rpx + env(safe-area-inset-bottom)); /* é€‚é…åº•éƒ¨å®‰å…¨åŒºåŸŸ */
}

.card-title {
    font-size: 36rpx;
    font-weight: 600;
    /* margin-bottom: 16rpx; */
    position: relative;
    padding-left: 24rpx;
    display: flex;
    align-items: center;
}

.card-title::before {
    content: "";
    position: absolute;
    left: 0;
    top: 12rpx; /* æ ¹æ®å­—ä½“å¤§å°å’Œè¡Œé«˜è°ƒæ•´ */
    width: 8rpx;
    height: 36rpx;
    background: var(--primary);
    border-radius: 4rpx;
}

.info-item {
    display: flex;
    padding: 28rpx 0;
    border-bottom: 1px solid var(--border);
	margin-left: 5rpx;
}

.info-item:last-child {
    border-bottom: none;
}

.info-icon {
    width: 48rpx; /* å›ºå®šå®½åº¦ï¼Œç¡®ä¿å›¾æ ‡å¯¹é½ */
    color: var(--primary);
    font-size: 36rpx;
    margin-right: 24rpx;
    display: flex;
    align-items: flex-start; /* å›¾æ ‡é¡¶éƒ¨å¯¹é½æ–‡å­— */
    justify-content: center;
}

.info-content {
    flex: 1; /* å æ®å‰©ä½™ç©ºé—´ */
}

.info-title {
    font-weight: 500;
    margin-bottom: 8rpx;
    color: var(--dark-text);
}

.info-text {
    color: var(--gray-text);
    font-size: 30rpx;
    line-height: 1.6;
}

.hours-item {
    display: flex;
    justify-content: space-between;
    margin-bottom: 16rpx;
    font-size: 30rpx; /* ç»Ÿä¸€æ–‡å­—å¤§å° */
}

.hours-item:last-child {
    margin-bottom: 0;
}

.hours-day {
    color: var(--gray-text);
}

.hours-time {
    font-weight: 500;
    color: var(--dark-text);
}

/* ç‰¹è‰²æ¨è */
.featured-items {
    display: flex;
    flex-wrap: wrap;
    gap: 24rpx;
    margin-top: 20rpx;
}

.featured-item {
    width: calc(50% - 12rpx); /* ä¸¤åˆ—å¸ƒå±€ */
    border: 1px solid var(--border);
    border-radius: 24rpx;
    overflow: hidden;
    transition: all 0.3s;
}

.featured-item:active {
    transform: scale(0.98);
    box-shadow: 0 3px 10px rgba(0,0,0,0.1);
}

.featured-image {
    height: 240rpx;
    background: var(--weui-BG-0);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--light-text);
    font-size: 60rpx; /* å›¾æ ‡å¤§å° */
}

.featured-content {
    padding: 24rpx;
}

.featured-name {
    font-weight: 600;
    margin-bottom: 12rpx;
    font-size: 32rpx;
}

.featured-desc {
    color: var(--gray-text);
    font-size: 26rpx;
    line-height: 1.5;
    min-height: 78rpx; /* ç¡®ä¿æè¿°è¡Œé«˜ä¸€è‡´ */
}

.featured-price {
    color: var(--primary);
    font-weight: 600;
    margin-top: 16rpx;
    font-size: 30rpx;
}

/* åº•éƒ¨æ“ä½œæ  */
.action-bar {
    background: white;
    padding: 20rpx 30rpx;
    padding-bottom: calc(20rpx + env(safe-area-inset-bottom)); /* é€‚é…åº•éƒ¨å®‰å…¨åŒºåŸŸ */
    display: flex;
    gap: 20rpx;
    border-top: 1px solid var(--border);
    position: sticky; /* Sticky æˆ– fixed æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹© */
    bottom: 0;
    z-index: 100;
    box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
}

.nav-btn, .primary-btn {
    border-radius: 50rpx;
    padding: 0; /* æŒ‰é’®å†…éƒ¨æ— éœ€é¢å¤–padding */
    font-size: 32rpx;
    font-weight: 500;
    display: flex;
    align-items: center;
    justify-content: center;
    /* cursor: pointer; */
    transition: all 0.3s;
    flex: 1;
    height: 100rpx;
    line-height: 1; /* æ¶ˆé™¤é»˜è®¤buttonçš„line-heightå½±å“ */
}

.nav-btn {
    background: white;
    color: var(--primary);
    border: 1px solid var(--primary);
}

.nav-btn i, .primary-btn i {
    margin-right: 16rpx;
}

.nav-btn:active {
    background: var(--primary-lightest);
    transform: scale(0.98);
}

.primary-btn {
    background: var(--primary);
    color: white;
    border: none;
}

.primary-btn:active {
    background: var(--primary-light);
    transform: scale(0.98);
}

/* æ»šåŠ¨åŒºåŸŸ */
.content-scroll {
    flex: 1; /* å æ®å‰©ä½™å‚ç›´ç©ºé—´ */
    overflow-y: auto; /* å…è®¸å†…å®¹æ»šåŠ¨ */
    -webkit-overflow-scrolling: touch; /* æé«˜iOSè®¾å¤‡æ»šåŠ¨æµç•…åº¦ */
    scroll-behavior: smooth;
}

/* åœ°å›¾é¢„è§ˆ */
.map-preview {
    height: 360rpx;
    background: var(--weui-BG-0);
    border-radius: 24rpx;
    margin-top: 30rpx;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--light-text);
    position: relative;
    overflow: hidden;
    /* cursor: pointer; */
}

.map-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 30rpx;
    background: rgba(0,0,0,0.6);
    color: white;
    text-align: center;
    font-size: 30rpx;
}

/* å¾®ä¿¡äºŒç»´ç  */
.wechat-qr {
    width: 200rpx;
    height: 200rpx;
    margin-top: 10rpx;
    display: block; /* ç¡®ä¿å›¾ç‰‡ç‹¬å ä¸€è¡Œ */
}
</style>